# ╔═══════════════════════════════════════════════════════════╗
# ║  General Settings - Configurações Gerais                  ║
# ╚═══════════════════════════════════════════════════════════╝

$background = rgba(262626ff)
$surface = rgba(404040ff)
$foreground = rgba(e6e6e6ff)
$inactive_border = rgba(404040ff)
$shadow_color = rgba(00000066)
$accent_red = rgba(e65c5cff)

general {
    # ┌───────────────────────────────────────────────────────┐
    # │  GAPS & BORDERS                                       │
    # └───────────────────────────────────────────────────────┘
    
    gaps_in = 10             # Espaço entre janelas
    gaps_out = 16            # Espaço das bordas da tela
    border_size = 4          # Espessura da borda
    
    # Cores das bordas (serão substituídas pelo tema dinâmico)
    col.active_border = $accent_red
    col.inactive_border = $inactive_border
    
    # ┌───────────────────────────────────────────────────────┐
    # │  LAYOUT                                               │
    # └───────────────────────────────────────────────────────┘
    
    layout = dwindle         # Layout padrão (dwindle ou master)
    # hyprctl keyword general:layout "dwindle/master/scrolling"
    locale = "pt_BR"
    
    # ┌───────────────────────────────────────────────────────┐
    # │  CURSOR                                               │
    # └───────────────────────────────────────────────────────┘
    
    no_cursor_warps = false  # Cursor se move para janela focada
    resize_on_border = true  # Redimensionar arrastando borda
    extend_border_grab_area = 15  # Área extra para pegar borda
    
    # ┌───────────────────────────────────────────────────────┐
    # │  WINDOW BEHAVIOR                                      │
    # └───────────────────────────────────────────────────────┘
    
    allow_tearing = false    # Desabilitar tearing
}

# ┌───────────────────────────────────────────────────────────┐
# │  DECORATION - Efeitos Visuais                             │
# └───────────────────────────────────────────────────────────┘

decoration {
    rounding = 15 # Arredondamento de cantos
    rounding_power = 4
    # ┌───────────────────────────────────────────────────────┐
    # │  BLUR                                                 │
    # └───────────────────────────────────────────────────────┘
    
    blur {
        enabled = true
        size = 6
        passes = 3
        special = true
        new_optimizations = on
        ignore_opacity = true
        noise = 0.07
        contrast = 1.5
        brightness = 0.8
        vibrancy = 0.2
        vibrancy_darkness = 0.2
        xray = false
    }
    
    # ┌───────────────────────────────────────────────────────┐
    # │  SHADOW                                               │
    # └───────────────────────────────────────────────────────┘
    
    shadow {
        enabled = true
        range = 16
        render_power = 3
        color = $shadow_color
        color_inactive = $shadow_color
        offset = 0 0
    }
    
    # ┌───────────────────────────────────────────────────────┐
    # │  OPACITY                                              │
    # └───────────────────────────────────────────────────────┘
    
    active_opacity = 1.0
    inactive_opacity = 0.65
    fullscreen_opacity = 1.0
    
    # ┌───────────────────────────────────────────────────────┐
    # │  DIM                                                  │
    # └───────────────────────────────────────────────────────┘
    
    dim_inactive = false
    dim_strength = 0.1
}

# ┌───────────────────────────────────────────────────────────┐
# │  DWINDLE LAYOUT                                           │
# └───────────────────────────────────────────────────────────┘

dwindle {
    pseudotile = true        # Pseudo-tiling para janelas flutuantes
    preserve_split = true    # Manter direção do split
    smart_split = false      # Split automático inteligente
    smart_resizing = true    # Redimensionamento inteligente
    force_split = 2          # 0=split segue mouse, 1=esquerda, 2=direita
    no_gaps_when_only = false  # Sem gaps com apenas 1 janela
    special_scale_factor = 0.85 # tamanho da janela em worspace especial
}

# ┌───────────────────────────────────────────────────────────┐
# │  MASTER LAYOUT (alternativo)                              │
# └───────────────────────────────────────────────────────────┘

master {
    new_status = slave
    mfact = 0.6             # Proporção da janela master (60%)
    orientation = left      # Master à esquerda
    inherit_fullscreen = true
    allow_small_split = true
    special_scale_factor = 0.85
}

# ┌───────────────────────────────────────────────────────────┐
# │  GESTURES (Touchpad)                                      │
# └───────────────────────────────────────────────────────────┘

gesture = 3, horizontal, workspace
gesture = 3, left, dispatcher, workspace, -1
gesture = 3, right, dispatcher, worspace, +1

#gestures {
#    workspace_swipe = true
#    workspace_swipe_fingers = 3
#    workspace_swipe_distance = 300
#    workspace_swipe_invert = true
#    workspace_swipe_min_speed_to_force = 30
#    workspace_swipe_cancel_ratio = 0.5
#    workspace_swipe_create_new = true
#    workspace_swipe_forever = false
#}

# ┌───────────────────────────────────────────────────────────┐
# │  INPUT (Keyboard_Lyt + Mouse)                             │
# └───────────────────────────────────────────────────────────┘
input {
    kb_layout = br
    kb_variant =
    kb_model = abnt2
    kb_options =
    kb_rules =
    
    follow_mouse = 1

    sensitivity = 0

    touchpad {
	natural_scroll = false
    }
}

device {
    name = epic-mouse-v1
    sensitivity = -0.5
}

cursor {
    hide_on_key_press = true
  }

# ┌───────────────────────────────────────────────────────────┐
# │  MISC - Configurações Diversas                            │
# └───────────────────────────────────────────────────────────┘

misc {
    disable_hyprland_logo = true      # Remover logo do Hyprland
    disable_splash_rendering = true   # Remover splash screen
    force_default_wallpaper = 0       # Não forçar wallpaper padrão
    vfr = true                        # Variable Frame Rate (economia de energia)
    vrr = 0                           # Variable Refresh Rate (0=off, 1=on, 2=fullscreen only)
    mouse_move_enables_dpms = true    # Movimento do mouse acorda tela
    key_press_enables_dpms = true     # Tecla pressionada acorda tela
    enable_swallow = true             # Terminal "engole" app gráfico
    swallow_regex = ^(kitty)$         # Regex para swallow
    focus_on_activate = true          # Focar janela ao ativar
    animate_manual_resizes = false    # Não animar resize manual
    animate_mouse_windowdragging = false  # Não animar drag de janela
    disable_autoreload = false        # Auto-reload ao salvar config
    on_focus_under_fullscreen = 1
    anr_missed_pings = 3
    background_color = $background
}

layerrule {
    name = blur_with_ignore_alpha
    match:namespace = ^(walker|swaync|swayosd|waybar)$
    blur = true
    ignore_alpha = 0.1
  }

group {
    col.border_active = $activeBorderColor
    col.border_inactive = $inactiveBorderColor
    col.border_locked_active = -1
    col.border_locked_inactive = -1

    groupbar {
        font_size = 12
        font_family = monospace
        font_weight_active = ultraheavy
        font_weight_inactive = normal

        indicator_height = 0
        indicator_gap = 5
        height = 22
        gaps_in = 5
        gaps_out = 0

        text_color = rgb(ffffff)
        text_color_inactive = rgba(ffffff90)
        col.active = rgba(00000040)
        col.inactive = rgba(00000020)

        gradients = true
        gradients_rounding = 0
        gradient_round_only_edges = false
      }
  }

# ┌───────────────────────────────────────────────────────────┐
# │  BINDS - Comportamento de Atalhos                         │
# └───────────────────────────────────────────────────────────┘

binds {
    workspace_back_and_forth = false  # Alternar entre workspaces
    allow_workspace_cycles = false    # Ciclar workspaces
    pass_mouse_when_bound = false     # Passar mouse para app
    scroll_event_delay = 300          # Delay para scroll (ms)
}

# ┌───────────────────────────────────────────────────────────┐
# │  XWayland                                                 │
# └───────────────────────────────────────────────────────────┘

xwayland {
    force_zero_scaling = true         # Forçar scaling 1.0 no XWayland
}
